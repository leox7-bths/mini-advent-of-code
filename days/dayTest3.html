<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="../style.css" />
</head>

<body>
<h2>-- Test Day --</h2>
<p><small>By Ava</small></p>
<p>Your task for today is to add one to your puzzle input. Goodluck; you'll need it.</p>
<br>
<p>Your puzzle input is: <span id="inputDisplay"></span></p>

<textarea id="userAnswer"></textarea>

<button onclick="displayOutput()" id="submit" class="text-button">[Submit]</button>
<br>
<span id="siteOutput"></span>

<script>
    // This entire section can be copy-pasted into another advent. Just change the getter-functions.

    // The input generation script can be pasted here.
    function getInput() {
      return Math.floor(Math.random() * 10) + 1;
    }

    // The solution script can be pasted here.
    function getAnswer(data) {
      return (data + 1);
    }

    let puzzleInput = getInput();
    document.getElementById("inputDisplay").textContent = puzzleInput;

    function displayOutput() {
      let userAnswerRaw = document.getElementById("userAnswer").value;
      let userAnswer = Number(userAnswerRaw);
      let output = document.getElementById('siteOutput');
      let puzzleAnswer = getAnswer(puzzleInput);

      // Returns early if answer is an empty string or not a number
      if (userAnswerRaw.length === 0) {
        output.textContent = "You need to actually provide an answer before you hit the button.";
        return;
      } else if (isNaN(userAnswer)) {
        output.textContent = `The answer to all problems is a number. "${userAnswerRaw}" is an invalid answer.`;
        return;
      }

      // Appropriate response based on the answer
      if (userAnswer === puzzleAnswer) {
        output.textContent = "That's correct! I'm not too sure if I can give you a gold star, though. Sorry!";
        output.style.color = 'yellow';
        let answerBox = document.getElementById('userAnswer');
        let submitButton = document.getElementById('submit');
        answerBox.style.display = 'none';
        submitButton.style.display = 'none';
      } else {
        let reasonWrong;
        if (userAnswer > puzzleAnswer) {
          reasonWrong = 'high';
        } else if (userAnswer < puzzleAnswer) {
          reasonWrong = 'low';
        }
        output.textContent = `That's not right. Your answer is too ${reasonWrong}.
        If you need help, you may want to consider using a calculator.`;
      }
    }
</script>

<script>
    function resizeIframe() {
      const height = document.documentElement.scrollHeight;
      parent.document.getElementById("dayFrame").style.height = height + "px";
    }
    window.addEventListener("load", resizeIframe);
</script>
</body>

</html>
