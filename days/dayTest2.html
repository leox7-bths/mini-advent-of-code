<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="/style.css" />
</head>

<body>
  <h2>-- Test Day --</h2>
  <p><small>By Ava</small></p>
  <p>Your task for today is to add one to your puzzle input. Goodluck; you'll need it.</p>
  <br>
  <p>Your puzzle input is: <span id="input"></span></p>

  <textarea style="width: 200px; min-height: 20px; max-height: 20px;" id="userAnswer"></textarea>

  <button onclick="checkAnswer()" class="text-button" id="submit">[Submit]</button>
  <br>
  <span id="siteOutput"></span>

  <script>
    let puzzleInput = Math.floor(Math.random() * 10) + 1;
    document.getElementById("input").textContent = puzzleInput;

    function checkAnswer() {
      let userAnswerRaw = document.getElementById("userAnswer").value;
      let userAnswer = Number(userAnswerRaw);
      let output = document.getElementById('siteOutput');
      let puzzleAnswer = puzzleInput + 1;

      // Returns early if answer is not a number or an empty string
      if (isNaN(userAnswer)) {
        output.textContent = `The answer will always be a number, so an answer like '${userAnswerRaw}' will never be correct.`;
        return;
      }
      if (userAnswerRaw.length === 0) {
        output.textContent = "You need to actually provide an answer before you hit the button.";
        return;
      }

      // Appropriate response based on the answer
      if (userAnswer === puzzleAnswer) {
        output.textContent = `That's correct! ${puzzleInput} + 1 is indeed ${puzzleAnswer}!
        I'm not too sure if I can give you a gold star, though. Sorry!`;
        output.style.color = 'yellow';
        let answerBox = document.getElementById('userAnswer');
        let submitButton = document.getElementById('submit');
        answerBox.style.display = 'none';
        submitButton.style.display = 'none';
      } else {
        let reasonWrong;
        if (userAnswer > puzzleAnswer) {
          reasonWrong = 'high';
        } else if (userAnswer < puzzleAnswer) {
          reasonWrong = 'low';
        }
        output.textContent = `That's not right. Your answer is too ${reasonWrong}.
        If you need help, you may want to consider using a calculator.`;
      }
    }
  </script>

  <script>
    function resizeIframe() {
      const height = document.documentElement.scrollHeight;
      parent.document.getElementById("dayFrame").style.height = height + "px";
    }
    window.addEventListener("load", resizeIframe);
  </script>
</body>

</html>